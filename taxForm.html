<!DOCTYPE html>
<html>
    <head>
        <title>TaxForm</title>
        <link rel = "stylesheet" href = "style4.css">
        <link rel = "icon" type = "image/png" href = "favicon.png" sizes = "32x32">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
    </head>
</html>
<body>
    <header class = "header">
        <h1><a href="index.html">AsteroidAudit</a></h1>
    </header>
    <div class = "title">
        <h2 id = "practice"><en>get experience and manage your finances better.</en></h2>
        </div>
        <div class = "content">
    <form id = "taxForm">
        <label for="grossIncome">Gross Income</label>
        <input type="number" id = "grossIncome" placeholder="Enter Amount">
        <br>
        <label for="retirementContributions">Retirement Contributions</label>
        <input type="number" id = "retirementContributions" placeholder="Enter Amount">
        <br>
        <label for="studentLoanInterestDeduction">Student Loan Interest Deductions</label>
        <input type="number" id = "studentLoanInterestDeduction" placeholder="Enter Amount">
        <br>
        <label for="otherAdjustments">Other Adjustment Amounts</label>
        <input type="number" id = "otherAdjustments" placeholder="Enter Amount">
        <br>
        <button type = "button" id = "updateAGIB">Calculate AGI</button>
        <br>
        <p>AGI: </p>
        <p id = "AGICurrent">0</p>
        <br>
    </form>
    <form id = "taxForm2">
        <label for="standardDeductions">Standard Deductions</label>
        <input type="number" id = "standardDeductions" placeholder="Enter Amount">
        <br>
        <label for="credits">Credits (ex. child tax credit)</label>
        <input type="number" id = "credits" placeholder="Enter Amount">
        <br>
        <button type = "button" id = "updateTaxableIncomeB">Calculate Taxable Income</button>
        <br>
        <p>Taxable Income: </p>
        <p id = "taxableIncomeCurrent">0</p>
        <br>
    </form>
    <form>
        <label for="withholdingOrEstimated">Withholding or Estimated Payments</label>
        <input type="number" id = "withholdingOrEstimated" placeholder="Enter Amount">
        <br>
        <select id = "filingStatus" required>
            <option value = "single">Single</option>
            <option value = "married1">Married Filing Jointly</option>
            <option value = "married2">Married Filing Separately</option>
            <option value = "headOfHousehold">Head of Household</option>
            <option value = "qss">Qualified Surviving Spouse</option>
        </select>
        <button type = "button" id = "updateTaxOwedB">Calculate Tax Owed</button><br>
        <p>Calculate Tax Owed: </p>
        <p id = "taxOwedCurrent">0</p>
        <br>
    </form>
</body>
</html>
<script>
    document.getElementById("updateAGIB").addEventListener("click", function() {
        let grossIncome = parseFloat(document.getElementById("grossIncome").value) || 0;
        let retirementContributions = parseFloat(document.getElementById("retirementContributions").value) || 0;
        let studentLoanInterestDeduction = parseFloat(document.getElementById("studentLoanInterestDeduction").value) || 0;
        let otherAdjustments = parseFloat(document.getElementById("otherAdjustments").value) || 0;
        let AGI = grossIncome - retirementContributions - studentLoanInterestDeduction - otherAdjustments;
        let a = document.getElementById("AGICurrent");
        a.textContent = AGI;
 })

 document.getElementById("updateTaxableIncomeB").addEventListener("click", function() {
        let grossIncome = parseFloat(document.getElementById("grossIncome").value) || 0;
        let retirementContributions = parseFloat(document.getElementById("retirementContributions").value) || 0;
        let studentLoanInterestDeduction = parseFloat(document.getElementById("studentLoanInterestDeduction").value) || 0;
        let otherAdjustments = parseFloat(document.getElementById("otherAdjustments").value) || 0;
        let AGI = grossIncome - retirementContributions - studentLoanInterestDeduction - otherAdjustments;
        let standardDeductions = parseFloat(document.getElementById("standardDeductions").value) || 0;
        let taxableIncome = AGI - standardDeductions;
        let t = document.getElementById("taxableIncomeCurrent");
        t.textContent = taxableIncome;
 })

 document.getElementById("updateTaxOwedB").addEventListener("click", function() {
        let grossIncome = parseFloat(document.getElementById("grossIncome").value) || 0;
        let retirementContributions = parseFloat(document.getElementById("retirementContributions").value) || 0;
        let studentLoanInterestDeduction = parseFloat(document.getElementById("studentLoanInterestDeduction").value) || 0;
        let otherAdjustments = parseFloat(document.getElementById("otherAdjustments").value) || 0;
        let AGI = grossIncome - retirementContributions - studentLoanInterestDeduction - otherAdjustments;
        let standardDeductions = parseFloat(document.getElementById("standardDeductions").value) || 0;
        let taxableIncome = AGI - standardDeductions;
        let filingStatus = document.getElementById("filingStatus").value || 0;
        let taxOwed = 0;
        if(filingStatus === "single") {
            let tax1 = Math.max(0, taxableIncome - 0);
            if(tax1 > 0) {
                tax1 = Math.min(11601, taxableIncome - 0) * 0.10;
            }
            let tax2 = Math.max(0, taxableIncome - 11601); 
            if(tax2 > 0) {
                tax2 = Math.min(47151 - 11601, taxableIncome - 11601) * 0.12;
            }
            let tax3 = Math.max(0, taxableIncome - 47151); 
            if(tax3 > 0) {
                tax3 = Math.min(100526 - 47151, taxableIncome - 47151) * 0.22;
            }
            let tax4 = Math.max(0, taxableIncome - 100526); 
            if(tax4 > 0) {
                tax4 = Math.min(191951 - 100526, taxableIncome - 100526) * 0.24;
            }
            let tax5 = Math.max(0, taxableIncome - 191951);
            if(tax5 > 0) {
                tax5 = Math.min(243726 - 191951, taxableIncome - 191951) * 0.32;
            }
            let tax6 = Math.max(0, taxableIncome - 243726);
            if(tax6 > 0) {
                tax6 = Math.min(609350 - 273726, taxableIncome - 243726) * 0.35;
            }
            let tax7 = Math.max(0, taxableIncome - 609350);
            if(tax7 > 0) {
                tax7 = (taxableIncome - 609350) * 0.37;
            }
            taxOwed = tax1 + tax2 + tax3 + tax4 + tax5 + tax6 + tax7;
        } else if (filingStatus === "married1") {
            let tax1 = Math.max(taxableIncome - 0);
            let tax2 = Math.max(0, tax1 - 23201);
            let tax3 = Math.max(0, tax2 - 94301);
            let tax4 = Math.max(0, tax3 - 201051);
            let tax5 = Math.max(0, tax4 - 383901);
            let tax6 = Math.max(0, tax5 - 487451);
            let tax7 = Math.max(0, tax6 - 731200);
            taxOwed = tax7 * 0.37 + tax6 * 0.35 + tax5 * 0.32 + tax4 * 0.24 + tax3 * 0.22 + tax2 * 0.12 + tax1 * 0.10;
        } else if (filingStatus === "married2") {
            let tax1 = Math.max(taxableIncome - 0);
            let tax2 = Math.max(0, tax1 - 11601);
            let tax3 = Math.max(0, tax2 - 47151);
            let tax4 = Math.max(0, tax3 - 100526);
            let tax5 = Math.max(0, tax4 - 191951);
            let tax6 = Math.max(0, tax5 - 243726);
            let tax7 = Math.max(0, tax6 - 365600);
            taxOwed = tax7 * 0.37 + tax6 * 0.35 + tax5 * 0.32 + tax4 * 0.24 + tax3 * 0.22 + tax2 * 0.12 + tax1 * 0.10;
        } else if (filingStatus === "qss") {
            let tax1 = Math.max(taxableIncome - 0);
            let tax2 = Math.max(0, tax1 - 23201);
            let tax3 = Math.max(0, tax2 - 94301);
            let tax4 = Math.max(0, tax3 - 201051);
            let tax5 = Math.max(0, tax4 - 383901);
            let tax6 = Math.max(0, tax5 - 487451);
            let tax7 = Math.max(0, tax6 - 731200);
            taxOwed = tax7 * 0.37 + tax6 * 0.35 + tax5 * 0.32 + tax4 * 0.24 + tax3 * 0.22 + tax2 * 0.12 + tax1 * 0.10;
        } else if (filingStatus === "headOfHousehold") {
            let tax1 = Math.max(taxableIncome - 0);
            let tax2 = Math.max(0, tax1 - 16551);
            let tax3 = Math.max(0, tax2 - 63101);
            let tax4 = Math.max(0, tax3 - 100501);
            let tax5 = Math.max(0, tax4 - 191951);
            let tax6 = Math.max(0, tax5 - 243701);
            let tax7 = Math.max(0, tax6 - 609350);
            taxOwed = tax7 * 0.37 + tax6 * 0.35 + tax5 * 0.32 + tax4 * 0.24 + tax3 * 0.22 + tax2 * 0.12 + tax1 * 0.10;
        }
        let o = document.getElementById("taxOwedCurrent");
        o.textContent = taxOwed;
 })
</script>